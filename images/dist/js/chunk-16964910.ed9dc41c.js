(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-16964910"],{"187d":function(t,e,a){},2909:function(t,e,a){"use strict";a.d(e,"a",(function(){return l}));var i=a("6b75");function n(t){if(Array.isArray(t))return Object(i["a"])(t)}a("a4d3"),a("e01a"),a("d3b7"),a("d28b"),a("3ca3"),a("ddb0"),a("a630");function r(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}var s=a("06c5");function o(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function l(t){return n(t)||r(t)||Object(s["a"])(t)||o()}},"31fc":function(t,e,a){"use strict";a("ab83")},"3b98":function(t,e,a){"use strict";a.d(e,"a",(function(){return n}));var i=a("5530"),n=(a("d81d"),{data:function(){return{scaleWidth:document.body.clientWidth,scaleHeight:document.body.clientHeight}},computed:{scale:function(){return this.scaleWidth/1920},scaleColumns:function(){var t=this.scale;return(this.initColumns||[]).map((function(e){return Object(i["a"])(Object(i["a"])({},e),{},{width:e.width*t})}))}},methods:{sizeUpdata:function(){this.scaleWidth=document.body.clientWidth,this.scaleHeight=document.body.clientHeight}},created:function(){window.addEventListener("resize",this.sizeUpdata)},beforeDestroy:function(){window.removeEventListener("resize",this.sizeUpdata)}})},"41ae":function(t,e,a){"use strict";a("f651")},4702:function(t,e,a){"use strict";a("58b0")},5207:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a-select",{staticClass:"mySelect",class:t.selectType,style:{width:t.width?t.width+"px":"100%"},attrs:{allowClear:"",disabled:t.disabled,size:t.size,loading:t.stationList.loading,placeholder:"请选择场站","show-search":"",value:t.value,options:t.stationList.data,filterOption:t.selectFilter},on:{change:t.selectChange}})},n=[],r=a("5530"),s=a("ade3"),o=(a("2ef0"),a("9839")),l=(a("b0c0"),a("a9e3"),a("498a"),a("7db0"),a("2f62")),c={name:"BranchSelect",components:Object(s["a"])({},o["b"].name,o["b"]),props:{selectType:{type:String,default:"in-table"},width:{type:Number,default:0},size:{type:String,default:"large"},value:{type:String,default:void 0},disabled:{type:Boolean,default:!1}},data:function(){return{}},computed:Object(r["a"])({},Object(l["d"])("order",["stationList"])),methods:Object(r["a"])(Object(r["a"])({},Object(l["b"])("order",["requestStationList"])),{},{selectFilter:function(t,e){var a=t;a=a?a.trim():a;var i=e.componentOptions.children[0].text;return i.indexOf(a)>=0},selectChange:function(t){this.$emit("input",t);var e=t?this.stationList.data.find((function(e){return e.value===t})):void 0;this.$emit("update:stationName",e&&e.label||void 0)}}),created:function(){var t=this.stationList;0!==t.data.length||t.loading||this.requestStationList()}},d=c,u=(a("8afc"),a("2877")),h=Object(u["a"])(d,i,n,!1,null,"23448104",null);e["a"]=h.exports},"58b0":function(t,e,a){},"652f":function(t,e,a){},"6acf":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"main"},[a("div",{staticClass:"top flex"},[a("div",{staticClass:"station-connector-info box"},t._l(t.stationConnectorInfo,(function(e){return a("div",{key:e.name,staticClass:"item"},[a("div",{staticClass:"flex flex-center flex-space-between station-name"},[a("span",{staticClass:"stationName"},[t._v(t._s(e.stationName))]),a("span",{staticClass:"address"},[t._v(t._s(e.address))])]),a("div",{staticClass:"flex flex-space-between station-data"},[a("span",{staticClass:"label"},[t._v(" 充电桩 "),a("b",{staticClass:"number"},[t._v(t._s(e.connectorCount)+"个")])]),a("span",{staticClass:"label"},[t._v(" 充电车位 "),a("b",{staticClass:"number"},[t._v(t._s(e.parkingCount)+"个")])]),a("span",{staticClass:"label"},[t._v(" 工作人员 "),a("b",{staticClass:"number"},[t._v(" "+t._s(e.staffCount)+"个")])])])])})),0),a("div",{staticClass:"station-order-info box"},[a("label",{staticClass:"panel-label"},[t._v("场站充电情况")]),a("div",{staticClass:"flex chart-box"},t._l(t.stationOrderInfoList,(function(t){return a("div",{key:t.name,staticClass:"chart"},[a("station-order-info-bar",{attrs:{title:t.name,height:356,width:309,chartData:t.chart}})],1)})),0)])]),a("div",{staticClass:"bottom flex"},[a("div",{staticClass:"peak-valley-flat-info box"},[a("div",{staticClass:"flex peak-valley-flat-form"},[a("label",{staticClass:"panel-label"},[t._v("用电统计")]),a("div",{staticClass:"form-type flex"},[a("div",{staticClass:"form-type-item",class:{active:"hour"===t.orderOption.range},on:{click:function(e){t.orderOption.range="hour"}}},[t._v(" 小时 ")]),a("div",{staticClass:"form-type-item",class:{active:"day"===t.orderOption.range},on:{click:function(e){t.orderOption.range="day"}}},[t._v(" 日 ")]),a("div",{staticClass:"form-type-item",class:{active:"month"===t.orderOption.range},on:{click:function(e){t.orderOption.range="month"}}},[t._v(" 月 ")])]),a("div",{staticClass:"form-station"},[a("SelectStation",{attrs:{size:"default"},model:{value:t.orderOption.stationId,callback:function(e){t.$set(t.orderOption,"stationId",e)},expression:"orderOption.stationId"}})],1)]),a("a-spin",{attrs:{spinning:t.dashboardOrderLoading}},[a("div",{staticClass:"chart-box flex"},[a("div",{staticClass:"chart-box-circular flex"},[a("div",{staticClass:"chart-title"},[t._v(t._s(t.orderOption.title[t.orderOption.range]))]),a("div",{staticClass:"chart-pie-box"},[t.orderData.picList?a("OrderChatsPie",{attrs:{width:200,height:200,pieWidth:30,colors:t.orderData.picList.map((function(t){return t.color})),data:t.orderData.picList}}):t._e()],1),t.orderData.picList?a("div",{staticClass:"label flex flex-space-between"},t._l(t.orderData.picList,(function(e){return a("div",{key:e.name,staticClass:"label-item flex flex-center"},[a("span",{staticClass:"spot",style:{backgroundColor:e.color}}),a("label",[t._v(t._s(e.name))]),a("span",{staticClass:"text"},[t._v(t._s(e.value)+"度")])])})),0):t._e()]),a("div",{staticClass:"chart-box-bar"},[t.orderData.statisticInfoList?a("OrderChatsLine",{attrs:{width:648,height:316,title:t.orderOption.title[t.orderOption.range],data:t.orderData.statisticInfoList}}):t._e()],1)])])],1),a("div",{staticClass:"station-order-volume box"},[a("div",{staticClass:"flex flex-center flex-space-between"},[a("label",{staticClass:"panel-label"},[t._v("订单统计")]),a("div",{staticClass:"panel-option"},[a("div",{staticClass:"panel-option-button button-left",class:{disable:t.orderVolumeOption.leftDisable},on:{click:function(e){return t.orderVolumeScroll("left")}}}),a("div",{staticClass:"panel-option-button button-right",class:{disable:t.orderVolumeOption.rightDisable},on:{click:function(e){return t.orderVolumeScroll("right")}}})])]),a("div",{staticClass:"flex station-order-volume-box"},[a("div",{staticClass:"flex flex station-order-volume-scroll"},t._l(t.orderVolume,(function(e){return a("div",{key:e.stationName,staticClass:"item"},[a("div",{staticClass:"title"},[t._v(t._s(e.stationName))]),a("div",{staticClass:"panel"},[a("div",{staticClass:"number"},[t._v(t._s(e.dayOrderCount))]),a("div",{staticClass:"text"},[t._v("今日累计订单量")])]),a("div",{staticClass:"panel"},[a("div",{staticClass:"number"},[t._v(t._s(e.monthOrderCount))]),a("div",{staticClass:"text"},[t._v("本月累计订单量")])]),a("div",{staticClass:"time"},[a("div",[t._v("数据更新时间")]),a("div",{staticClass:"br"},[t._v(t._s(e.latestOrderTime))])])])})),0)])])])])},n=[],r=a("5530"),s=a("2909"),o=(a("d81d"),a("b0c0"),a("4e82"),a("d3b7"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"chars-box px-no-viewport",style:{height:t.height+"px",width:t.width+"px",transform:"scale("+t.scale+")",transformOrigin:"top left"}},[a("div",{ref:"echart-line"})])}),l=[],c=(a("a9e3"),a("159b"),a("99af"),a("a15b"),a("25f0"),a("313e")),d=a("3b98"),u={name:"ThinkTank",mixins:[d["a"]],props:{width:{type:Number,default:0},height:{type:Number,default:0},chartData:{type:Object,default:function(t){return{}}},title:{type:String,default:""},chartsGrid:{type:Object,default:function(){return{}}},chartLegend:{type:Object,default:function(){return{}}}},watch:{chartData:function(){var t=this;this.$nextTick((function(){t.setOption()}))}},data:function(){return{}},mounted:function(){this.init()},destroyed:function(){this.bar4Echart.off("mouseover",this.setOption),this.bar4Echart.off("mouseout",this.setOption),this.bar4Echart.dispose(),this.bar4Echart=null},methods:{setOption:function(t){var e=["rgba(33, 128, 255, 0.8500)","rgba(0, 185, 127, 0.8500)","rgba(255, 174, 0, 0.8500)"],a=this.chartData,i=this.title,n=a.y,r={type:"category",axisTick:{show:!0},axisLine:{show:!0,lineStyle:{color:"#666",width:1,type:"solid"}},axisLabel:{show:!0,interval:0,hideOverlap:!0,fontSize:16,fontFamily:"PingFangSC-Regular, PingFang SC",fontWeight:400,rotate:0,margin:8,color:"#666666",formatter:function(t){return t}},data:a.x},s=n.reduce((function(t,a,i){return a.data.forEach((function(e){t=e>t?e:t})),n[i].data=a.data.map((function(t,a){return{value:t,itemStyle:{color:e[a]}}})),parseInt(t)}),-1),o=n.map((function(t){return{type:"value",alignTicks:!0,axisLabel:{show:!0,interval:0,fontSize:16,fontFamily:"PingFangSC-Regular, PingFang SC",fontWeight:400,color:"#666"}}})),l={title:{text:i,left:"center",textStyle:{fontSize:16,fontFamily:"PingFangSC-Medium, PingFang SC",fontWeight:500,color:"#1A1A1A",lineHeight:22}},tooltip:{trigger:"axis",axisPointer:{lineStyle:{color:"#E6F2F0"}},backgroundColor:"rgba(0, 0, 0, 0.9)",extraCssText:"box-shadow: 0px 0px 8px 0px #00b97f;border-radius: 8px;border-color:rgba(0,0,0,0);padding:9px 12px",formatter:function(t){return'<div class="unwanted-postCss-chats-bar-tooltip">\n              <div class="unwanted-postCss-title">\n                场站名称：'.concat(t[0].name,"\n              </div>\n              ").concat(t.map((function(t){return'<div class="unwanted-postCss-box" style="color:'.concat(t.color,'">\n                <div class="unwanted-postCss-series-name">').concat(t.seriesName,"：").concat(t.value).concat("累计电量"===t.seriesName?"度":"次","</div>\n              </div>")})).join(""),"\n            </div>")}},grid:{top:"52",left:["17","27","37","50","60","60"][s<=1?2:s.toString().length],bottom:"30",right:"2"},color:e,xAxis:r,yAxis:o,series:n.map((function(t,a){return{type:"bar",color:e,yAxisIndex:a,name:t.name,data:t.data,label:void 0,barWidth:40}}))};this.bar4Echart.setOption(l,!0)},init:function(){var t=this.width,e=this.height;this.bar4Echart=c["a"](this.$refs["echart-line"]),this.bar4Echart.resize({width:t,height:e}),this.chartData.y&&this.setOption()}}},h=u,f=(a("4702"),a("2877")),p=Object(f["a"])(h,o,l,!1,null,"4022eef6",null),b=p.exports,m=a("c1df"),v=a.n(m),g=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"chars-box",style:{height:t.height+"px",width:t.width+"px",transform:"scale("+t.scale+")",transformOrigin:"top left"}},[a("div",{ref:"echart-div"})])},y=[],x={name:"ThinkTank",mixins:[d["a"]],props:{width:{type:Number},height:{type:Number},pieWidth:{type:Number},colors:{type:Array},data:{type:Array}},watch:{data:function(){var t=this;this.$nextTick((function(){t.setOption()}))}},data:function(){return{}},destroyed:function(){this.bar4Echart.dispose(),this.bar4Echart=null},mounted:function(){this.init()},methods:{setOption:function(){var t=this.data,e=this.title,a=this.pieWidth,i=this.width,n=this.colors,r={title:{text:e},series:[{color:n&&n.length?n:["#00A4FF"],name:e,type:"pie",center:["50%","50%"],radius:[i/2-a-10,i/2-10],label:{show:!1,position:"center"},emphasis:{label:{show:!0,fontSize:"40",fontWeight:"bold",fontFamily:"PingFangSC-Medium"}},data:t}]};this.bar4Echart.setOption(r,!0)},init:function(){var t,e=this.width,a=this.height;this.bar4Echart=c["a"](this.$refs["echart-div"]),this.bar4Echart.resize({width:e,height:a}),null!==(t=this.data)&&void 0!==t&&t.length&&this.setOption()}}},C=x,O=(a("41ae"),Object(f["a"])(C,g,y,!1,null,"5acb6884",null)),w=O.exports,S=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"chars-box",style:{height:t.height+"px",width:t.width+"px",transform:"scale("+t.scale+")",transformOrigin:"top left"}},[a("div",{ref:"echart-div"})])},_=[],k=(a("ac1f"),a("5319"),{name:"ThinkTank",mixins:[d["a"]],props:{width:{type:Number,default:0},height:{type:Number,default:0},title:{type:String,default:""},data:{type:Array,default:function(t){return[]}}},watch:{data:function(){var t=this;this.$nextTick((function(){t.setOption()}))}},data:function(){return{}},destroyed:function(){this.bar4Echart.dispose(),this.bar4Echart=null},mounted:function(){this.init()},methods:{setOption:function(){var t=this.data,e=this.title,a=function(t){return'<div class="unwanted-postCss-chats-bar-tooltip">\n        <div style="color:#fff;">'.concat(t[0].axisId.replace("0",""),"： ").concat(t[0].name,"</div>\n        ").concat(t.map((function(t){return'<div class="unwanted-postCss-box" style="color:'.concat(t.color,'">\n              <span class="unwanted-postCss-series-name">').concat(t.seriesName,'：</span>\n              <span class="unwanted-postCss-value">').concat(t.value,"</span>\n            </div>")})).join(""),"\n      </div>")},i={title:{text:e,left:"center",textStyle:{fontSize:16,fontFamily:"PingFangSC-Medium, PingFang SC",fontWeight:500,color:"#1A1A1A",lineHeight:22}},tooltip:{trigger:"axis",axisPointer:{lineStyle:{color:"#E6F2F0"}},backgroundColor:"rgba(0, 0, 0, 0.9)",extraCssText:"box-shadow: 0px 0px 8px 0px #00b97f;border-radius: 8px;border-color:rgba(0,0,0,0);padding:9px 12px",formatter:a},color:["#00b97f"],xAxis:{name:"时间",nameTextStyle:{color:"#00000000"},type:"category",data:t.map((function(t){return t.xValue}))},yAxis:{type:"value",name:"电量（度）",nameLocation:"center",nameGap:50},series:[{symbol:"none",data:t,name:"电量（度）",type:"line",areaStyle:{normal:{opacity:.3}}}],grid:{x:70,y:50,x2:0,y2:50}};this.bar4Echart.setOption(i,!0)},init:function(){var t,e=this.width,a=this.height;this.bar4Echart=c["a"](this.$refs["echart-div"]),this.bar4Echart.resize({width:e,height:a}),null!==(t=this.data)&&void 0!==t&&t.length&&this.setOption()}}}),L=k,I=(a("e70a"),Object(f["a"])(L,S,_,!1,null,"b01ebde2",null)),D=I.exports,j=a("5207"),E=a("8a05"),F={dashboardStation:"dashboard/station",dashboardOrder:"dashboard/order"};function T(t){return Object(E["c"])({url:F.dashboardStation,method:"get",params:t})}function N(t){return Object(E["c"])({url:F.dashboardOrder,method:"get",params:t})}var A={name:"Dashboard",data:function(){return{stationConnectorInfo:[],stationOrderInfo:[],orderVolume:[],orderVolumeOption:{scrollbar:0,leftDisable:!0,rightDisable:!0},orderOption:{range:"hour",stationId:void 0,title:{hour:"近24小时订单情况",day:"近1个月订单情况",month:"近1年订单情况"}},dashboardOrderLoading:!1,orderData:{}}},components:{StationOrderInfoBar:b,SelectStation:j["a"],OrderChatsLine:D,OrderChatsPie:w},computed:{stationOrderInfoList:function(){var t=this.stationOrderInfo,e=[{name:"年度累计充电量",key:"yearTotalPower",seriesName:"累计电量"},{name:"年度累计充电次数",key:"yearTotalCOC",seriesName:"充电次数"},{name:"昨日充电量",key:"yesterdayPower",seriesName:"累计电量"},{name:"昨日充电次数",key:"yesterdayCOC",seriesName:"充电次数"}].map((function(e){var a=e.name,i=e.key,n=e.seriesName,r=Object(s["a"])(t).sort((function(t,e){return e[i]-t[i]}));return r.length>3&&(r.length=3),{name:a,chart:{x:r.map((function(t){return"".concat(t.stationName)})),y:[{name:n,data:r.map((function(t){return t[i]||0}))}]}}}));return e}},created:function(){this.dashboardOrder(),this.dashboardStation()},mounted:function(){},methods:{orderVolumeScroll:function(t){var e=document.querySelector(".station-order-volume-box"),a=1*(e.getAttribute("data-scroll-left")||0);if(e){var i=e.clientWidth,n=e.scrollWidth-i,r=e.querySelector(".item");if(r){var s=2.2*(r.clientWidth+2),o=a+s*("left"===t?-1:1);o=o>n?n:o<0?0:o,e.querySelector(".flex").style.transform="translateX(".concat(-1*o,"px)"),e.setAttribute("data-scroll-left",o),this.updateScroll(o,n)}}},updateScroll:function(t,e){this.orderVolumeOption={leftDisable:0===t,rightDisable:t===e}},dashboardOrder:function(){var t=this;t.dashboardOrderLoading=!0;var e=Object(r["a"])(Object(r["a"])({},this.orderOption),{},{title:void 0});N(e).finally((function(){t.dashboardOrderLoading=!1})).then((function(a){t.orderData=Object(r["a"])(Object(r["a"])({},a.data),{},{picList:[{value:parseInt(a.data.peakValleyFlatInfo.peakTotalPower),name:"峰",color:"rgba(255, 79, 27, 0.8500)"},{value:parseInt(a.data.peakValleyFlatInfo.flatTotalPower),name:"平",color:"rgba(33, 128, 255, 0.8500)"},{value:parseInt(a.data.peakValleyFlatInfo.valleyTotalPower),name:"谷",color:"rgba(255, 174, 0, 0.8500)"}],statisticInfoList:t.seStatisticInfoList(a.data,e.range)})}))},dashboardStation:function(){var t=this;t.dashboardStationLoading=!0,T().finally((function(){t.dashboardStationLoading=!1})).then((function(e){var a=e.data,i=a.connectorInfo,n=a.orderVolume,r=a.stationOrderInfo;t.stationConnectorInfo=i,t.orderVolume=n,t.stationOrderInfo=r}))},seStatisticInfoList:function(t,e){var a=t.startTime,i=t.endTime,n=t.statisticInfo,s=v()(i).startOf(e),o=Object(r["a"])({},n),l={hour:"YYYY-MM-DD HH:mm",day:"YYYY-MM-DD",month:"YYYY-MM"}[e],c={hour:"HH",day:"DD",month:"MM"}[e],d=v()(a).startOf(e),u=[];while(d<=s){var h=d.format(l);u.push({name:h,value:o[h]||0,xValue:d.format(c)}),d=d.add(1,e)}return u}},watch:{orderVolume:function(t){this.orderVolumeOption={leftDisable:!0,rightDisable:t.length<=4}},orderOption:{deep:!0,handler:function(){this.dashboardOrder()}}},beforeDestroy:function(){}},P=A,V=(a("31fc"),Object(f["a"])(P,i,n,!1,null,"14b35402",null));e["default"]=V.exports},"8afc":function(t,e,a){"use strict";a("187d")},ab83:function(t,e,a){},e70a:function(t,e,a){"use strict";a("652f")},f651:function(t,e,a){}}]);
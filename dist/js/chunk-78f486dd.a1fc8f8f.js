(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-78f486dd"],{"024c":function(e,t,a){"use strict";a("24b1")},"0331":function(e,t,a){},"18df":function(e,t,a){"use strict";a("0331")},"24b1":function(e,t,a){},d245:function(e,t,a){"use strict";a.r(t);var i,n,s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"table-common order"},[a("div",{staticClass:"header"},[a("div",{staticClass:"more-form"},[a("div",{staticClass:"form-box"},[a("div",{staticClass:"form-item"},[a("div",{staticClass:"form"},[a("a-input",{attrs:{size:"large",placeholder:"请输入姓名"},model:{value:e.filters.name,callback:function(t){e.$set(e.filters,"name",t)},expression:"filters.name"}})],1)]),a("div",{staticClass:"form-item"},[a("div",{staticClass:"form"},[a("a-input",{attrs:{size:"large",placeholder:"请输入岗位"},model:{value:e.filters.job,callback:function(t){e.$set(e.filters,"job",t)},expression:"filters.job"}})],1)]),a("div",{staticClass:"form-item"},[a("a-button",{staticClass:"searchButton",attrs:{size:"large",type:"primary"},on:{click:e.search}},[e._v(" 搜索 ")])],1)])]),a("div",{staticClass:"button-box"},[a("a-tooltip",[a("a-button",{attrs:{size:"large"},on:{click:e.add}},[e._v(" 新增账号 ")])],1)],1)]),a("div",{staticClass:"table"},[a("a-table",{staticClass:"table-border-bottom table-scrollbar common-modal-box",attrs:{columns:e.scaleColumns,"data-source":e.tableList,pagination:e.pagination,loading:e.getTableListLoading,rowKey:function(e){return""+e.id}},on:{change:e.pageChange},scopedSlots:e._u([{key:"indexText",fn:function(t,i,n){return[e.sort&&"index"===e.sort.name&&"descend"===e.sort.value?a("div",[e._v(" "+e._s((e.tableList.length-n).toString().padStart(2,"0"))+" ")]):a("div",[e._v(e._s((n+1).toString().padStart(2,"0")))])]}},{key:"operation",fn:function(t,i){return[a("div",{staticClass:"table-operation"},[a("span",[a("a",{attrs:{disabled:e.updateData.id},on:{click:function(){return e.edit(i)}}},[e._v("编辑")]),a("a",{staticClass:"see",on:{click:function(t){e.deleteOption.visible=!0,e.deleteOption.id=i.id}}},[e._v("删除")])])])]}}])})],1),a("UserEditModal",{attrs:{initData:e.userEditInitData,visible:e.userEditModalVisible,cancel:function(t){return e.userEditModalVisible=!1}},on:{edited:e.requestTableList}}),a("DeleteModal",{attrs:{visible:e.deleteOption.visible,cancel:function(t){return e.deleteOption.visible=!1},ok:e.del,confirmLoading:e.deleteOption.loading}})],1)},r=[],o=a("1da1"),d=a("ade3"),c=(a("cd17"),a("ed3b")),l=(a("9a33"),a("f933")),u=(a("c68a"),a("0020")),m=(a("96cf"),a("b0c0"),a("d3b7"),a("3b98")),b=a("72ed"),p=a("15ba"),f=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-form",{attrs:{form:e.form}},[a("a-modal",{staticClass:"editModal common-modal-box",attrs:{title:"编辑",visible:e.visible,"confirm-loading":e.confirmLoading,okText:"确认",okButtonProps:{props:{size:"large"}},cancelButtonProps:{props:{size:"large"}}},on:{ok:e.submit,cancel:e.cancel}},[a("a-spin",{attrs:{spinning:e.viewDetailsLoading}},[a("div",{staticClass:"modal-box"},[a("div",{staticClass:"input-box"},[a("a-form-item",{staticClass:"input-box-item"},[a("div",{staticClass:"label"},[e._v("用户名")]),a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["account",{rules:[{required:"add"===e.mode,message:"请输入用户名"}],initialValue:e.initData.account}],expression:"[\n                'account',\n                { rules: [{ required: mode === 'add', message: '请输入用户名' }], initialValue: initData.account }\n              ]"}],attrs:{placeholder:"请输入用户名",size:"large",disabled:"edit"===e.mode}})],1),a("a-form-item",{staticClass:"input-box-item"},[a("div",{staticClass:"label"},[e._v("姓名")]),a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["name",{rules:[{required:"add"===e.mode,message:"请输入姓名"}],initialValue:e.initData.name}],expression:"[\n                'name',\n                { rules: [{ required: mode === 'add', message: '请输入姓名' }], initialValue: initData.name }\n              ]"}],attrs:{placeholder:"请输入姓名",size:"large",disabled:"edit"===e.mode}})],1),a("a-form-item",{staticClass:"input-box-item"},[a("div",{staticClass:"label"},[e._v("密码")]),a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["newPassword",{rules:[{validator:e.word8Verification}],validateTrigger:"blur"}],expression:"[\n                'newPassword',\n                {\n                  rules: [{ validator: word8Verification }],\n                  validateTrigger: 'blur'\n                }\n              ]"}],attrs:{size:"large",type:"password",placeholder:"请输入密码",autocomplete:"new-password"}})],1),a("a-form-item",{staticClass:"input-box-item"},[a("div",{staticClass:"label"},[e._v("密码确认")]),a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["duplicatePassword",{rules:[{validator:e.duplicateVerification}],validateTrigger:"blur"}],expression:"[\n                'duplicatePassword',\n                {\n                  rules: [{ validator: duplicateVerification }],\n                  validateTrigger: 'blur'\n                }\n              ]"}],attrs:{size:"large",type:"password",placeholder:"请再次输入密码",autocomplete:"new-password"}})],1)],1),a("div",{staticClass:"job-permission"},[a("div",{staticClass:"list job"},[a("div",{staticClass:"title"},[e._v("所属岗位")]),a("div",{staticClass:"content scrollbar-grey"},[a("div",{staticClass:"checkbox-name-list"},e._l(e.allJob,(function(t){return a("div",{key:t.id,staticClass:"checkbox-name",on:{click:function(a){e.selectJobId=t.id+""}}},[e._v(" "+e._s(t.name)+" ")])})),0),a("a-checkbox-group",{staticClass:"checkbox-list",attrs:{options:e.allJob.map((function(e){return e.id+""}))},model:{value:e.checkedJobIds,callback:function(t){e.checkedJobIds=t},expression:"checkedJobIds"}})],1)]),a("Permission",{attrs:{jobId:e.selectJobId}})],1)])])],1)],1)},v=[],g=(a("c119"),a("d865")),h=(a("f2ef"),a("3af3")),w=(a("ee00"),a("bb76")),x=(a("ac1f"),a("1276"),a("7db0"),a("caad"),a("2532"),a("4d63"),a("25f0"),a("d81d"),a("ca00")),k=a("34b7"),C=a("8af3"),j=w["a"].Group,O=h["a"].Item,I={name:"UserEditModal",components:(i={},Object(d["a"])(i,h["a"].name,h["a"]),Object(d["a"])(i,O.name,O),Object(d["a"])(i,u["a"].name,u["a"]),Object(d["a"])(i,c["a"].name,c["a"]),Object(d["a"])(i,w["a"].name,w["a"]),Object(d["a"])(i,j.name,j),Object(d["a"])(i,g["a"].name,g["a"]),Object(d["a"])(i,"Permission",C["a"]),i),props:{initData:{type:Object,default:function(e){}},visible:{type:Boolean,default:!1},cancel:{type:Function,default:function(e){}}},data:function(){return{mode:"edit",form:this.$form.createForm(this),confirmLoading:!1,viewDetailsLoading:!1,loading:!1,allJob:[],selectJobId:"",checkedJobIds:[]}},computed:{},created:function(){this.getAllJob()},watch:{visible:{handler:function(e,t){if(this.form.resetFields(),e){if(!this.initData.id)return this.mode="add",this.selectJobId="",void(this.checkedJobIds=[]);this.mode="edit",this.checkedJobIds=(this.initData.jobId||"").split(",")||[],this.initData.jobId&&(this.selectJobId=this.initData.jobId.split(",")[0])}},immediate:!0},checkedJobIds:function(e,t){var a=e.find((function(e){return!t.includes(e)}));a&&(this.checkedJobIds=[a])}},methods:{word8Verification:function(e,t,a){var i=new RegExp("(?=.*[0-9])(?=.*[a-zA-Z]).{8,30}");"edit"!==this.mode||""!==t&&void 0!==t?i.test(t)?a():a(new Error("密码中必须包含字母、数字，且至少8位")):a()},duplicateVerification:function(e,t,a){var i=this.form;t!==i.getFieldValue("newPassword")?a(new Error("两次输入的密码不一致")):a()},submit:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.form.validateFields(["account","name","newPassword","duplicatePassword"],{force:!0},(function(t,a){var i=a.account,n=a.name,s=a.newPassword,r=a.duplicatePassword,o=(""===s||void 0===s)&&(""===r||void 0===r);if(!t){var d=Object(x["d"])(a);if("edit"!==e.mode||o||d.success){var c={id:e.initData.id&&1*e.initData.id,accountNumber:i,name:n,password:s,jobId:e.checkedJobIds.map((function(e){return 1*e}))};e.requestSubmit(c)}else e.$message.warn(d.msg)}}));case 1:case"end":return t.stop()}}),t)})))()},requestSubmit:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if("add"!==t.mode){a.next=6;break}return a.next=3,k["d"].post(e);case 3:i=a.sent,a.next=9;break;case 6:return a.next=8,k["d"].put(e);case 8:i=a.sent;case 9:1===i.code&&(t.$message.success("操作成功！"),t.cancel(),t.$emit("edited"));case 10:case"end":return a.stop()}}),a)})))()},getAllJob:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,k["a"].get({page:1,perPage:99999});case 2:a=t.sent,e.allJob=a.data.list;case 4:case"end":return t.stop()}}),t)})))()}}},D=I,J=(a("024c"),a("2877")),_=Object(J["a"])(D,f,v,!1,null,"7d3b9316",null),y=_.exports,E={name:"Order",data:function(){var e=[{title:"序号",dataIndex:"index",key:"index",width:72,align:"center",scopedSlots:{customRender:"indexText"}},{title:"账号",dataIndex:"account",key:"account",width:550,align:"center"},{title:"人员姓名",dataIndex:"name",key:"name",width:550,align:"center"},{title:"所属岗位",dataIndex:"job",key:"job",width:550,align:"center"},{title:"操作",dataIndex:"operation",key:"operation",width:120,align:"center",scopedSlots:{customRender:"operation"}}];return{formText:"YYYY/MM/DD",isTableFilterTime:!1,userEditModalVisible:!1,userEditInitData:{},deleteOption:{visible:!1,id:"",loading:!1},getTableListLoading:!1,initColumns:e}},mixins:[m["a"],b["a"]],components:(n={DeleteModal:p["a"],UserEditModal:y},Object(d["a"])(n,u["a"].name,u["a"]),Object(d["a"])(n,l["a"].name,l["a"]),Object(d["a"])(n,c["a"].name,c["a"]),n),computed:{},methods:{getTableList:function(e){return Object(o["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,k["d"].get(e);case 2:return a=t.sent,t.abrupt("return",a.data);case 4:case"end":return t.stop()}}),t)})))()},add:function(){this.userEditInitData={},this.userEditModalVisible=!0},edit:function(e){this.userEditInitData=e,this.userEditModalVisible=!0},del:function(){var e=this;e.deleteOption.loading=!0,k["d"].delete({id:e.deleteOption.id}).then((function(t){e.$message.success("删除成功！"),e.requestTableList(),e.deleteOption.visible=!1})).catch((function(t){e.$message.error("删除失败"),e.excelLoading=!1})).finally((function(t){e.deleteOption.loading=!1}))}},created:function(){},beforeDestroy:function(){}},V=E,L=(a("18df"),Object(J["a"])(V,s,r,!1,null,"0c32d588",null));t["default"]=L.exports}}]);